<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista De Usuarios</title>
    <link rel="stylesheet" href="ListaDeUsuarios.css">
</head>
<body>
   <div class="button_center"> <button id="botão"> Cadastrar um Usuario  </button> </div>
    <h1> Lista de Usuarios Cadastrados </h1>
    <ul id="userlist"></ul>

    <script> 
     async function buscadedados(){
        const resposta = await fetch('http://localhost:8080/usuarios')
        if (resposta.status === 200 ) {
            const dados = await resposta.json()
            const lista = document.getElementById('userlist')
            for (let i = 0; i < dados.length; i++) {
                const objeto = dados[i];
                const listadosusuarioscriados = document.createElement('li')
                listadosusuarioscriados.innerText = `[ID: ${objeto.id}] [Usuario: ${objeto.nome}] [Idade: ${objeto.idade} anos]`
                lista.appendChild(listadosusuarioscriados)
            }
        } else {
            if(resposta.status === 400) {
                const dados = await resposta.json()
                alert(dados.mensagem)
            }else{
                alert("Erro Desconhecido.")
            }
        }
     }   
     buscadedados()

      const botao = document.getElementById('botão')
        botao.addEventListener('click', function() {
            window.location.href = 'Cadastro.html';
        });
    </script>
</body>
</html>